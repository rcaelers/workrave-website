<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=generator content="Hugo 0.109.0"><meta name=robots content="noindex, nofollow"><meta name=description content="Workrave is a program that assists in the recovery and prevention of Repetitive Strain Injury (RSI). The program frequently alerts you to take micro-pauses, rest breaks and restricts you to your daily limit. The program runs on GNU/Linux and Microsoft Windows.
"><link rel="shortcut icon" type=image/x-icon href=/images/favicon.ico><link rel=stylesheet href=https://workrave.org/sass/main.min.ce4ba77d420210f043b2eafed49388defb4f40305be1d398a1ad593d5a932d05.css integrity="sha256-zkunfUICEPBDsur+1JOI3vtPQDBb4dOYoa1ZPVqTLQU=" media=screen><link rel=stylesheet href=https://workrave.org/css/main.min.163e0baf8d5e552480563d39ab81526b5107da66d4ad248880e87497fec53ea8.css integrity="sha256-Fj4Lr41eVSSAVj05q4FSa1EH2mbUrSSIgOh0l/7FPqg=" media=screen><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.1/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500&display=swap"><link rel=canonical href=https://workrave.org/bugzilla/653/><title>&#183; Workrave</title></head><body class=bg-light><div class="page-content bg-white"><nav class="navbar fixed-top navbar-expand-lg navbar-light"><div class=container><a class=navbar-brand href=/><img src=/images/workrave-logo.svg alt=Workrave class=page-logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#mainNavBar aria-controls=mainNavBar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=mainNavBar><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-uppercase" href=/about>About</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-uppercase" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Get Help</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdown><a class="dropdown-item text-uppercase" href=/faq/>FAQs</a>
<a class="dropdown-item text-uppercase" href=/docs/>Documentation</a>
<a class="dropdown-item text-uppercase" href=/support/>Support</a></div></li><li class=nav-item><a class="nav-link text-uppercase" href=/contribute>Contribute</a></li><li class=nav-item><a class="nav-link text-uppercase" href=/download/>Downloads</a></li><li class=nav-item><a class="nav-link text-uppercase" href=/blog/>Blog</a></li></ul></div></div></nav><div class="jumbotron jumbotron-fluid banner-style-small"></div><div class="container-lg mt-5 bugzilla" style=max-width:1280px><div class=row><div class="h3 col-md-12 bg-light font-weight-bold">Bug&nbsp;653 - Tray icon has opaque background</div></div><div class="row py-5"><div class=col-6><div class=row><div class="col-4 text-right font-weight-bold">Status:</div><div class=col-8>RESOLVED FIXED</div></div><div class=row><div class="col-4 text-right font-weight-bold">Component:</div><div class=col-8>Core :: UNIX</div></div><div class=row><div class="col-4 text-right font-weight-bold">Version:</div><div class=col-8>1.8.4</div></div><div class=row><div class="col-4 text-right font-weight-bold">Hardware:</div><div class=col-8>PC Linux</div></div><div class=row><div class="col-4 text-right font-weight-bold">Importance:</div><div class=col-8>P4 minor</div></div><div class=row><div class="col-4 text-right font-weight-bold">Target Milestone:</div><div class=col-8>---</div></div><div class=row><div class="col-4 text-right font-weight-bold">Assignee:</div><div class=col-8>Ray Satiro</div></div><div class=row><div class="col-4 text-right font-weight-bold">URL:</div><div class=col-8></div></div><div class=row><div class="col-4 text-right font-weight-bold">Depends on:</div><div class=col-8></div></div><div class=row><div class="col-4 text-right font-weight-bold">Blocks:</div><div class=col-8></div></div></div><div class=col-6><div class=row><div class="col-4 text-right font-weight-bold">Reported:</div><div class=col-8>Jul 14 2007 03:40:06 UTC</div></div><div class=row><div class="col-4 text-right font-weight-bold">by:</div><div class=col-8>Andre Offringa</div></div><div class=row><div class="col-4 text-right font-weight-bold">Modified:</div><div class=col-8>Mar 11 2008 00:34:22 UTC</div></div><div class=row><div class="col-4 text-right font-weight-bold">CC List:</div><div class=col-8>Andre Offringa</div></div><div class=row><div class="col-4 text-right font-weight-bold"></div><div class=col-8>Francois Marier</div></div><div class=row><div class="col-4 text-right font-weight-bold"></div><div class=col-8>Ray Satiro</div></div></div></div><div class="row pb-4"><div class=col-12><div class=card><h5 class="card-header p-1" id=attachments-header><button class="btn btn-light collapsed w-100 text-left" type=button data-toggle=collapse data-target=#attachments-content aria-expanded=false aria-controls=attachments-content>
<i class="fa fa-chevron-down pull-right"></i>&nbsp;Attachments</button></h5><div class=collapse id=attachments-content aria-labelledby=attachments-header><div class="card-body p-0"><table class="table table-dark table-bordered mb-0"><thead><tr><th scope=col>Id</th><th scope=col>Who</th><th scope=col>When</th><th scope=col>Size</th><th scope=col>Type</th></tr></thead><tbody><tr><th scope=row rowspan=2>107</th><td colspan=4><a href=https://workrave.org/bugzilla/attachments/attachment-107.png>Tray icons with opaque workrave icon</a><br><img src=https://workrave.org/bugzilla/attachments/attachment-107.png class="img-fluid img-thumbnail pt-2" alt="Tray icons with opaque workrave icon"></td></tr><tr><td>Andre Offringa</td><td>Sep 18 2007 23:49:32 UTC</td><td>27554</td><td>image/png</td></tr><tr><th scope=row rowspan=2>108</th><td colspan=4><a href=https://workrave.org/bugzilla/attachments/attachment-108.png>transparency test</a><br><img src=https://workrave.org/bugzilla/attachments/attachment-108.png class="img-fluid img-thumbnail pt-2" alt="transparency test"></td></tr><tr><td>Ray Satiro</td><td>Sep 19 2007 04:13:44 UTC</td><td>508</td><td>image/png</td></tr><tr><th scope=row rowspan=2>109</th><td colspan=4><a href=https://workrave.org/bugzilla/attachments/attachment-109.png>pidgin-2.2.0\pidgin\pixmaps\tray\22</a><br><img src=https://workrave.org/bugzilla/attachments/attachment-109.png class="img-fluid img-thumbnail pt-2" alt=pidgin-2.2.0\pidgin\pixmaps\tray\22></td></tr><tr><td>Ray Satiro</td><td>Sep 19 2007 22:32:51 UTC</td><td>808</td><td>image/png</td></tr><tr><th scope=row rowspan=2>110</th><td colspan=4><a href=https://workrave.org/bugzilla/attachments/attachment-110.png>Tray icon of workrave when replaced with Pidgin icons.</a><br><img src=https://workrave.org/bugzilla/attachments/attachment-110.png class="img-fluid img-thumbnail pt-2" alt="Tray icon of workrave when replaced with Pidgin icons."></td></tr><tr><td>Andre Offringa</td><td>Sep 20 2007 00:03:04 UTC</td><td>17687</td><td>image/png</td></tr><tr><th scope=row rowspan=2>111</th><td colspan=4><a href=https://workrave.org/bugzilla/attachments/attachment-111.png>capture</a><br><img src=https://workrave.org/bugzilla/attachments/attachment-111.png class="img-fluid img-thumbnail pt-2" alt=capture></td></tr><tr><td>Ray Satiro</td><td>Sep 20 2007 06:07:29 UTC</td><td>3943</td><td>image/png</td></tr></tbody></table></div></div></div></div></div><div class="row pb-4"><div class=col-12><div class=card><h5 class="card-header p-1" id=history-header><button class="btn btn-light collapsed w-100 text-left" type=button data-toggle=collapse data-target=#history-content aria-expanded=false aria-controls=history-content>
<i class="fa fa-chevron-down pull-right"></i>&nbsp;history</button></h5><div class="collapse p-0" id=history-content aria-labelledby=history-header><div class="card-body p-0"><table class="table table-dark table-bordered mb-0"><thead><tr><th scope=col>Who</th><th scope=col>When</th><th scope=col>What</th><th scope=col>Removed</th><th scope=col>Added</th></tr></thead><tbody><tr><th scope=row rowspan=1>Rob Caelers</th><td rowspan=1>Aug 27 2007 14:04:10 UTC</td><td>priority</td><td>P2</td><td>P4</td></tr><tr><th scope=row rowspan=1>Ray Satiro</th><td rowspan=1>Sep 18 2007 22:35:53 UTC</td><td>cc</td><td></td><td>Ray Satiro</td></tr><tr><th scope=row rowspan=2>Ray Satiro</th><td rowspan=2>Sep 20 2007 06:07:29 UTC</td><td>status</td><td>NEW</td><td>ASSIGNED</td></tr><tr><td>assigned_to</td><td>Rob Caelers</td><td>Ray Satiro</td></tr><tr><th scope=row rowspan=1>Francois Marier</th><td rowspan=1>Nov 7 2007 03:15:58 UTC</td><td>cc</td><td></td><td>Francois Marier</td></tr><tr><th scope=row rowspan=2>Rob Caelers</th><td rowspan=2>Mar 11 2008 00:34:22 UTC</td><td>status</td><td>ASSIGNED</td><td>RESOLVED</td></tr><tr><td>resolution</td><td></td><td>FIXED</td></tr></tbody></table></div></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Description</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Jul 14 2007 03:40:06 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>The background of workrave&#39;s tray icon is opaque (the background around the sheep). If the traybar is not the same color as the background, the icon looks kind of ugly. It would be nice if the background would be transparent.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 1</div><div class=float-left>Ray Satiro&nbsp;&nbsp;Sep 18 2007 22:35:53 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>I don&#39;t notice that on debian etch or windows xp. Would it be possible for you to take a screenshot of just your panel (no private info) and add it to this report? also more detailed os / window manager info please
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 2</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Sep 18 2007 23:49:32 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Created attachment 107
Tray icons with opaque workrave icon</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 3</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Sep 18 2007 23:53:04 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>I&#39;ve attached a partial screenshot. I use KDE from Debian testing. I&#39;ve configured the traybar to be &#39;half&#39; transparent as you can see on the screenshot. The other icons (clipboard, laptop status and Pidgin) show up transparent but Workrave does not.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 4</div><div class=float-left>Ray Satiro&nbsp;&nbsp;Sep 19 2007 04:13:44 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Created attachment 108
transparency test

hm that&#39;s weird.

I made a minor modification to the sheep tray icon. The black border is now slightly lighter. I then set the transparent color full black. This, however, is not very different from the current png. I then opened in irfanview v4 and saved it using the included pngout plugin.

So please try it out. If you can, take a screenshot regardless of whether or not it&#39;s transparent. That information will help us revise the png if necessary.

cd /usr/share/workrave/images
mv workrave-icon-medium.png workrave-icon-medium.bak.png
mv $yourdldir/workrave-icon-medium.png .</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 5</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Sep 19 2007 08:21:41 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>(In reply to comment #4)
&gt; I made a minor modification to the sheep tray icon. The black border is now
&gt; slightly lighter. I then set the transparent color full black. This, however,
&gt; is not very different from the current png. I then opened in irfanview v4 and
&gt; saved it using the included pngout plugin.
&gt; 
&gt; So please try it out. If you can, take a screenshot regardless of whether or
&gt; not it&#39;s transparent. That information will help us revise the png if
&gt; necessary.

Thanks for answering. I did as you said, then restarted Workrave and by lack of changes my whole computer, but nothing changed - it still looks the same :(.
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 6</div><div class=float-left>Ray Satiro&nbsp;&nbsp;Sep 19 2007 22:32:51 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Created attachment 109
pidgin-2.2.0\pidgin\pixmaps\tray\22

Hi, 

In StatusIcon.cc the normal workrave status tray icon is workrave-icon-large.png @ 32x32. I thought that the 24x24 medium sheep icon was used for the tray, but I was wrong. The tray does use other 24x24 icons when the status is quiet or suspended.

Try setting Workrave to quiet, and then suspended. Are either of those tray icons transparent?

Set Workrave back to normal mode and exit. Replace workrave-icon-large.png with the icon I uploaded yesterday, and restart. Is the icon transparent now?

If that doesn&#39;t work, please try this:
Pidgin has a 22x22 transparent tray icon, tray-message.png (attached). Use it to temporarily replace workrave-icon-large.png. If the Pidgin icon isn&#39;t transparent when used by Workrave, there could be some issue with how the icon is placed.

Either way, please send a shot of the tray. Thanks!</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 7</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Sep 20 2007 00:03:04 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Created attachment 110
Tray icon of workrave when replaced with Pidgin icons.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 8</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Sep 20 2007 00:06:38 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>(In reply to comment #6)
&gt; Try setting Workrave to quiet, and then suspended. Are either of those tray
&gt; icons transparent?

Nope

&gt; Set Workrave back to normal mode and exit. Replace workrave-icon-large.png with
&gt; the icon I uploaded yesterday, and restart. Is the icon transparent now?

Nope, sorry

&gt; If that doesn&#39;t work, please try this:
&gt; Pidgin has a 22x22 transparent tray icon, tray-message.png (attached). Use it
&gt; to temporarily replace workrave-icon-large.png. If the Pidgin icon isn&#39;t
&gt; transparent when used by Workrave, there could be some issue with how the icon
&gt; is placed.

I guess that is the case... See my screenshot for how it is shown now. The icon on the right is workrave (the picture next to workrave is ofcourse the real Pidgin process).
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 9</div><div class=float-left>Andre Offringa&nbsp;&nbsp;Sep 20 2007 00:08:56 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>BTW.. workrave-icon-medium.png is the image that is normally shown at my tray, not the large version.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 10</div><div class=float-left>Ray Satiro&nbsp;&nbsp;Sep 20 2007 06:07:29 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Created attachment 111
capture

We&#39;ll look into this, thanks.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 11</div><div class=float-left>Francois Marier&nbsp;&nbsp;Nov 7 2007 03:15:58 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>*** Bug 693 has been marked as a duplicate of this bug. ***</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 12</div><div class=float-left>Rob Caelers&nbsp;&nbsp;Mar 11 2008 00:34:22 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Fixed. 

The workrave-icon is put into an event box. This is needed to get tooltips when hovering above the icon. This event box was causing the transparency problems. Setting the &#39;visible-window&#39; property of the eventbox to false solved the problem.</pre></div></div></div></div><div class="row pb-5"></div></div></div><footer class="container bg-light page-footer"><div class="row my-2"><div class="col-12 col-md text-muted"><img src=/images/workrave-logo.svg alt=Workrave style=width:auto;height:20px>
<small class=d-block>&copy; 2001-2020 Raymond Penners & Rob Caelers</small></div><div class="col-12 col-md text-muted"><small>Unless otherwise stated, all text and images on this website are licensed
under the General Public License version 3 or later.<br>This website is powered by <a href=https://gohugo.io>Hugo</a></small></div></div></footer><script src=https://code.jquery.com/jquery-3.4.1.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js integrity=sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6 crossorigin=anonymous></script>
<script type=text/javascript src=https://workrave.org/js/main.min.428d5e8643be5482cc6cf2fb1c80b2e5625f8df018f53d6474a9f4d58668e74c58b35e455ed592b933e43659cc50dc11f452e947f61df3fd7b137161a785b411.js integrity="sha512-Qo1ehkO+VILMbPL7HICy5WJfjfAY9T1kdKn01YZo50xYs15FXtWSuTPkNlnMUNwR9FLpR/Yd8/17E3Fhp4W0EQ=="></script></body></html>