<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=generator content="Hugo 0.109.0"><meta name=robots content="noindex, nofollow"><meta name=description content="Workrave is a program that assists in the recovery and prevention of Repetitive Strain Injury (RSI). The program frequently alerts you to take micro-pauses, rest breaks and restricts you to your daily limit. The program runs on GNU/Linux and Microsoft Windows.
"><link rel="shortcut icon" type=image/x-icon href=/images/favicon.ico><link rel=stylesheet href=https://workrave.org/sass/main.min.ce4ba77d420210f043b2eafed49388defb4f40305be1d398a1ad593d5a932d05.css integrity="sha256-zkunfUICEPBDsur+1JOI3vtPQDBb4dOYoa1ZPVqTLQU=" media=screen><link rel=stylesheet href=https://workrave.org/css/main.min.163e0baf8d5e552480563d39ab81526b5107da66d4ad248880e87497fec53ea8.css integrity="sha256-Fj4Lr41eVSSAVj05q4FSa1EH2mbUrSSIgOh0l/7FPqg=" media=screen><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.1/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500&display=swap"><link rel=canonical href=https://workrave.org/bugzilla/561/><title>&#183; Workrave</title></head><body class=bg-light><div class="page-content bg-white"><nav class="navbar fixed-top navbar-expand-lg navbar-light"><div class=container><a class=navbar-brand href=/><img src=/images/workrave-logo.svg alt=Workrave class=page-logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#mainNavBar aria-controls=mainNavBar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=mainNavBar><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-uppercase" href=/about>About</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-uppercase" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Get Help</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdown><a class="dropdown-item text-uppercase" href=/faq/>FAQs</a>
<a class="dropdown-item text-uppercase" href=/docs/>Documentation</a>
<a class="dropdown-item text-uppercase" href=/support/>Support</a></div></li><li class=nav-item><a class="nav-link text-uppercase" href=/contribute>Contribute</a></li><li class=nav-item><a class="nav-link text-uppercase" href=/download/>Downloads</a></li><li class=nav-item><a class="nav-link text-uppercase" href=/blog/>Blog</a></li></ul></div></div></nav><div class="jumbotron jumbotron-fluid banner-style-small"></div><div class="container-lg mt-5 bugzilla" style=max-width:1280px><div class=row><div class="h3 col-md-12 bg-light font-weight-bold">Bug&nbsp;561 - Feature request: Custom commands to be run on different events</div></div><div class="row py-5"><div class=col-6><div class=row><div class="col-4 text-right font-weight-bold">Status:</div><div class=col-8>REOPENED</div></div><div class=row><div class="col-4 text-right font-weight-bold">Component:</div><div class=col-8>Core</div></div><div class=row><div class="col-4 text-right font-weight-bold">Version:</div><div class=col-8>unspecified</div></div><div class=row><div class="col-4 text-right font-weight-bold">Hardware:</div><div class=col-8>All All</div></div><div class=row><div class="col-4 text-right font-weight-bold">Importance:</div><div class=col-8>P4 enhancement</div></div><div class=row><div class="col-4 text-right font-weight-bold">Target Milestone:</div><div class=col-8>---</div></div><div class=row><div class="col-4 text-right font-weight-bold">Assignee:</div><div class=col-8>Rob Caelers</div></div><div class=row><div class="col-4 text-right font-weight-bold">URL:</div><div class=col-8></div></div><div class=row><div class="col-4 text-right font-weight-bold">Depends on:</div><div class=col-8></div></div><div class=row><div class="col-4 text-right font-weight-bold">Blocks:</div><div class=col-8></div></div></div><div class=col-6><div class=row><div class="col-4 text-right font-weight-bold">Reported:</div><div class=col-8>Oct 3 2006 12:36:32 UTC</div></div><div class=row><div class="col-4 text-right font-weight-bold">by:</div><div class=col-8>Fredrik Wollsen (Motin)</div></div><div class=row><div class="col-4 text-right font-weight-bold">Modified:</div><div class=col-8>Oct 28 2009 22:14:08 UTC</div></div><div class=row><div class="col-4 text-right font-weight-bold">CC List:</div><div class=col-8>alesmuc</div></div><div class=row><div class="col-4 text-right font-weight-bold"></div><div class=col-8>Ray Satiro</div></div></div></div><div class="row pb-4"><div class=col-12><div class=card><h5 class="card-header p-1" id=history-header><button class="btn btn-light collapsed w-100 text-left" type=button data-toggle=collapse data-target=#history-content aria-expanded=false aria-controls=history-content>
<i class="fa fa-chevron-down pull-right"></i>&nbsp;history</button></h5><div class="collapse p-0" id=history-content aria-labelledby=history-header><div class="card-body p-0"><table class="table table-dark table-bordered mb-0"><thead><tr><th scope=col>Who</th><th scope=col>When</th><th scope=col>What</th><th scope=col>Removed</th><th scope=col>Added</th></tr></thead><tbody><tr><th scope=row rowspan=1>Rob Caelers</th><td rowspan=1>Aug 27 2007 14:03:59 UTC</td><td>priority</td><td>P2</td><td>P4</td></tr><tr><th scope=row rowspan=2>Rob Caelers</th><td rowspan=2>Mar 11 2008 20:45:07 UTC</td><td>resolution</td><td></td><td>FIXED</td></tr><tr><td>status</td><td>NEW</td><td>RESOLVED</td></tr><tr><th scope=row rowspan=3>Kees-Jan Dijkzeul</th><td rowspan=3>Oct 9 2009 11:08:16 UTC</td><td>status</td><td>RESOLVED</td><td>REOPENED</td></tr><tr><td>resolution</td><td>FIXED</td><td></td></tr><tr><td>cc</td><td></td><td>Ray Satiro</td></tr><tr><th scope=row rowspan=1>Kees-Jan Dijkzeul</th><td rowspan=1>Oct 28 2009 20:51:00 UTC</td><td>cc</td><td></td><td>alesmuc</td></tr></tbody></table></div></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Description</div><div class=float-left>Fredrik Wollsen (Motin)&nbsp;&nbsp;Oct 3 2006 12:36:32 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>I would really like to be able to run custom events on the different workrave events such as starting working-day, initiating forced break, start of manual break, end of micropause etc, but has not seen this possibility in neither http://www.workrave.org/features/ or man workrave. 

I would use it amongst other things to take screenshots of current progress, autosave current document (in case battery would drop during the pause!) and initiate backup-commands to be run while issuing the breaks. 

Seems very useful to me and shouldn&#39;t be timeconsuming to implement. When can we look forward to this you think?

Cheers!</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 1</div><div class=float-left>Rob Caelers&nbsp;&nbsp;Mar 11 2008 20:45:07 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Workrave now supports events through dbus. At the moment only break events. More events can be added if there is demand. Example:

obj = bus.get_object(&#34;org.workrave.Workrave&#34;, &#34;/org/workrave/Workrave/Core&#34;)
workrave = dbus.Interface(obj, &#34;org.workrave.CoreInterface&#34;)
workrave.connect_to_signal(&#34;MicrobreakChanged&#34;, microbreak_signal)

def microbreak_signal(self, progress):
  if progress == &#34;prelude&#34;:
     print &#34;Micro break warning&#34;
  elif progress == &#34;break&#34;:
     print &#34;Micro break started&#34;
  elif progress == &#34;none&#34;:
     print &#34;Micro break idle&#34;
  else:
     print &#34;Unknown progress for: %s&#34; % progress
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 2</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Oct 9 2009 11:08:16 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>I&#39;ve got a request via e-mail, to have this exact same feature available on windows.

Ray, this sounds like it might be your expertise?</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 3</div><div class=float-left>Ray Satiro&nbsp;&nbsp;Oct 13 2009 05:35:22 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Thanks for your e-mail Kees-Jan. Here&#39;s some of Babak&#39;s e-mail that you quoted:

&gt; &#34;The ability to run a file (exe,mp3,etc...) when the computer is locked for 
&gt; rest and when it&#39;s back.&#34;
&gt;
&gt; With this feature there will be lots and lots of new things and we can do 
&gt; with Workrave.
&gt; personally, I&#39;d choose to play a music when the computer is locked...
&gt; AND ALSO, Turn-Off-Monitor.exe for when it&#39;s locked
&gt; and Turn-On-Monitor.exe for when it&#39;s back....
&gt;
&gt; Please reply,
&gt; thanks in advance

Workrave 1.9.0 crashes when attempting to play MP3s in Windows. Wow, I never even thought to test that! The command idea however is much more broad. In terms of priority there are some more important items/bugs on my Workrave list. And I don&#39;t know that it&#39;s worth writing if it&#39;s unlikely to be included in a release.

My initial thoughts:

What if I changed the &#39;Sounds&#39; tab to the &#39;Events&#39; tab, or Sounds/Events, something like that, and for each event in addition to playing a sound a file could be executed? Or no change to the GUI, (which would kind of defeat the point, or would it?), and Workrave would auto-detect and the user could choose say, a .bat file instead of a .wav, to execute or play, respectively. 

So basically everything could look the same, but if a user selected a .bat or .exe file Workrave would know that it should execute that file on event and not play media. Although I think most users would will want sound even if executing a script.

comments?</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 4</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Oct 28 2009 20:51:00 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>*** Bug 869 has been marked as a duplicate of this bug. ***</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 5</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Oct 28 2009 21:06:26 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>In your proposal, I&#39;d have to choose between either a sound or an app, but not both (unless I program the app to play the sound instead of workrave). I think I&#39;d like to have both. (That is, if I were interested in being able to execute commands :-)

Also, I&#39;d not be happy if the UI secretly allowed you to select apps instead of sounds, without making it obvious to the user.

On a whole different line of thought: On linux events are broadcast using dbus. Isn&#39;t there a similar technology on Windows we could use? I am very much behind the times when it comes to Windows, but in the old days, I guess I&#39;d register a COM component with some specific interface, and have workrave search for all components publishing said interface and send events to them.

As an end result, I&#39;d have a sequence of events being broadcast to a single application (possibly written in Visual Basic or C# or something), allowing me to do some fancy logging or analysis. Maybe couple it to our companies time-writing or hour-tracking system or something. Having just the ability to start some app is of very limited use.

Just my ƒ0.05</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 6</div><div class=float-left>Ray Satiro&nbsp;&nbsp;Oct 28 2009 22:14:08 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Yup there&#39;s DBUS functionality for Workrave Windows, all credit to Rob. Personally I don&#39;t use it and actually the test builds of Workrave I work with are missing DBUS. The ideas are intriguing though.

As far as you not being happy with the UI not changing at all for an enhancement like this, I can relate. At one point there was an Advanced Preferences panel proposed (ie Timers, User Interface, Networking, *Advanced*) but Rob and Raymond decided it would not be implemented in the UI -- although some changes we made live on in the backend. The reason for this (if I remember correctly) is they want Workrave to be as simple as possible. Getting approval for an &#34;advanced&#34; feature for the UI is unlikely (Rob can weigh in here).

If any change is forthcoming here it would probably be in the backend. We could continue to expand the advanced key and check for commands to take place at the time of an event, something simple like (assuming Windows &amp; registry keys here):
HKCU\Software\Workrave\advanced\events
&#34;MicroBreakStarted&#34;=&#34;C:\\whatever.bat&#34;

However we now again have something that would not be used by 99.9% of users, but could help that .1% (still significant; probably mostly admins and hackers). According to Rob&#39;s comment from 2008, in this specific case DBUS already covers events like this. Perhaps it&#39;s not asking too much to have the (advanced) user work with DBUS here? Or do you guys think it should be implemented in Workrave?</pre></div></div></div></div><div class="row pb-5"></div></div></div><footer class="container bg-light page-footer"><div class="row my-2"><div class="col-12 col-md text-muted"><img src=/images/workrave-logo.svg alt=Workrave style=width:auto;height:20px>
<small class=d-block>&copy; 2001-2020 Raymond Penners & Rob Caelers</small></div><div class="col-12 col-md text-muted"><small>Unless otherwise stated, all text and images on this website are licensed
under the General Public License version 3 or later.<br>This website is powered by <a href=https://gohugo.io>Hugo</a></small></div></div></footer><script src=https://code.jquery.com/jquery-3.4.1.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js integrity=sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6 crossorigin=anonymous></script>
<script type=text/javascript src=https://workrave.org/js/main.min.428d5e8643be5482cc6cf2fb1c80b2e5625f8df018f53d6474a9f4d58668e74c58b35e455ed592b933e43659cc50dc11f452e947f61df3fd7b137161a785b411.js integrity="sha512-Qo1ehkO+VILMbPL7HICy5WJfjfAY9T1kdKn01YZo50xYs15FXtWSuTPkNlnMUNwR9FLpR/Yd8/17E3Fhp4W0EQ=="></script></body></html>