<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=generator content="Hugo 0.109.0"><meta name=robots content="noindex, nofollow"><meta name=description content="Workrave is a program that assists in the recovery and prevention of Repetitive Strain Injury (RSI). The program frequently alerts you to take micro-pauses, rest breaks and restricts you to your daily limit. The program runs on GNU/Linux and Microsoft Windows.
"><link rel="shortcut icon" type=image/x-icon href=/images/favicon.ico><link rel=stylesheet href=https://workrave.org/sass/main.min.ce4ba77d420210f043b2eafed49388defb4f40305be1d398a1ad593d5a932d05.css integrity="sha256-zkunfUICEPBDsur+1JOI3vtPQDBb4dOYoa1ZPVqTLQU=" media=screen><link rel=stylesheet href=https://workrave.org/css/main.min.163e0baf8d5e552480563d39ab81526b5107da66d4ad248880e87497fec53ea8.css integrity="sha256-Fj4Lr41eVSSAVj05q4FSa1EH2mbUrSSIgOh0l/7FPqg=" media=screen><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.7.1/css/all.css integrity=sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr crossorigin=anonymous><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500&display=swap"><link rel=canonical href=https://workrave.org/bugzilla/32/><title>&#183; Workrave</title></head><body class=bg-light><div class="page-content bg-white"><nav class="navbar fixed-top navbar-expand-lg navbar-light"><div class=container><a class=navbar-brand href=/><img src=/images/workrave-logo.svg alt=Workrave class=page-logo></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#mainNavBar aria-controls=mainNavBar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=mainNavBar><ul class="navbar-nav ml-auto"><li class=nav-item><a class="nav-link text-uppercase" href=/about>About</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle text-uppercase" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Get Help</a><div class="dropdown-menu dropdown-menu-right" aria-labelledby=navbarDropdown><a class="dropdown-item text-uppercase" href=/faq/>FAQs</a>
<a class="dropdown-item text-uppercase" href=/docs/>Documentation</a>
<a class="dropdown-item text-uppercase" href=/support/>Support</a></div></li><li class=nav-item><a class="nav-link text-uppercase" href=/contribute>Contribute</a></li><li class=nav-item><a class="nav-link text-uppercase" href=/download/>Downloads</a></li><li class=nav-item><a class="nav-link text-uppercase" href=/blog/>Blog</a></li></ul></div></div></nav><div class="jumbotron jumbotron-fluid banner-style-small"></div><div class="container-lg mt-5 bugzilla" style=max-width:1280px><div class=row><div class="h3 col-md-12 bg-light font-weight-bold">Bug&nbsp;32 - Break windows don't move</div></div><div class="row py-5"><div class=col-6><div class=row><div class="col-4 text-right font-weight-bold">Status:</div><div class=col-8>VERIFIED FIXED</div></div><div class=row><div class="col-4 text-right font-weight-bold">Component:</div><div class=col-8>GUI :: gtkmm</div></div><div class=row><div class="col-4 text-right font-weight-bold">Version:</div><div class=col-8>unspecified</div></div><div class=row><div class="col-4 text-right font-weight-bold">Hardware:</div><div class=col-8>PC Windows NT</div></div><div class=row><div class="col-4 text-right font-weight-bold">Importance:</div><div class=col-8>P3 minor</div></div><div class=row><div class="col-4 text-right font-weight-bold">Target Milestone:</div><div class=col-8>---</div></div><div class=row><div class="col-4 text-right font-weight-bold">Assignee:</div><div class=col-8>Raymond Penners</div></div><div class=row><div class="col-4 text-right font-weight-bold">URL:</div><div class=col-8></div></div><div class=row><div class="col-4 text-right font-weight-bold">Depends on:</div><div class=col-8></div></div><div class=row><div class="col-4 text-right font-weight-bold">Blocks:</div><div class=col-8><a href=https://workrave.org/bugzilla/52 style=text-decoration:line-through>52</a></div></div></div><div class=col-6><div class=row><div class="col-4 text-right font-weight-bold">Reported:</div><div class=col-8>Sep 4 2002 20:49:06 UTC</div></div><div class=row><div class="col-4 text-right font-weight-bold">by:</div><div class=col-8>Kees-Jan Dijkzeul</div></div><div class=row><div class="col-4 text-right font-weight-bold">Modified:</div><div class=col-8>Oct 22 2002 01:54:46 UTC</div></div></div></div><div class="row pb-4"><div class=col-12><div class=card><h5 class="card-header p-1" id=history-header><button class="btn btn-light collapsed w-100 text-left" type=button data-toggle=collapse data-target=#history-content aria-expanded=false aria-controls=history-content>
<i class="fa fa-chevron-down pull-right"></i>&nbsp;history</button></h5><div class="collapse p-0" id=history-content aria-labelledby=history-header><div class="card-body p-0"><table class="table table-dark table-bordered mb-0"><thead><tr><th scope=col>Who</th><th scope=col>When</th><th scope=col>What</th><th scope=col>Removed</th><th scope=col>Added</th></tr></thead><tbody><tr><th scope=row rowspan=1>Kees-Jan Dijkzeul</th><td rowspan=1>Sep 9 2002 21:46:07 UTC</td><td>blocks</td><td></td><td>52</td></tr><tr><th scope=row rowspan=1>Raymond Penners</th><td rowspan=1>Sep 14 2002 23:10:33 UTC</td><td>assigned_to</td><td>Rob Caelers</td><td>Raymond Penners</td></tr><tr><th scope=row rowspan=2>Raymond Penners</th><td rowspan=2>Sep 14 2002 23:17:16 UTC</td><td>status</td><td>NEW</td><td>RESOLVED</td></tr><tr><td>resolution</td><td></td><td>FIXED</td></tr><tr><th scope=row rowspan=2>Rob Caelers</th><td rowspan=2>Sep 14 2002 23:51:46 UTC</td><td>status</td><td>RESOLVED</td><td>REOPENED</td></tr><tr><td>resolution</td><td>FIXED</td><td></td></tr><tr><th scope=row rowspan=2>Raymond Penners</th><td rowspan=2>Sep 15 2002 20:28:42 UTC</td><td>status</td><td>REOPENED</td><td>RESOLVED</td></tr><tr><td>resolution</td><td></td><td>FIXED</td></tr><tr><th scope=row rowspan=2>Kees-Jan Dijkzeul</th><td rowspan=2>Sep 23 2002 01:50:39 UTC</td><td>status</td><td>RESOLVED</td><td>REOPENED</td></tr><tr><td>resolution</td><td>FIXED</td><td></td></tr><tr><th scope=row rowspan=1>Raymond Penners</th><td rowspan=1>Sep 24 2002 13:06:30 UTC</td><td>status</td><td>REOPENED</td><td>ASSIGNED</td></tr><tr><th scope=row rowspan=3>Raymond Penners</th><td rowspan=3>Sep 25 2002 10:42:40 UTC</td><td>severity</td><td>major</td><td>minor</td></tr><tr><td>status</td><td>ASSIGNED</td><td>RESOLVED</td></tr><tr><td>resolution</td><td></td><td>FIXED</td></tr><tr><th scope=row rowspan=2>Kees-Jan Dijkzeul</th><td rowspan=2>Sep 26 2002 23:30:06 UTC</td><td>status</td><td>RESOLVED</td><td>REOPENED</td></tr><tr><td>resolution</td><td>FIXED</td><td></td></tr><tr><th scope=row rowspan=1>Raymond Penners</th><td rowspan=1>Sep 27 2002 00:53:06 UTC</td><td>status</td><td>REOPENED</td><td>ASSIGNED</td></tr><tr><th scope=row rowspan=2>Raymond Penners</th><td rowspan=2>Sep 28 2002 06:11:24 UTC</td><td>status</td><td>ASSIGNED</td><td>RESOLVED</td></tr><tr><td>resolution</td><td></td><td>FIXED</td></tr><tr><th scope=row rowspan=2>Kees-Jan Dijkzeul</th><td rowspan=2>Oct 1 2002 01:19:04 UTC</td><td>status</td><td>RESOLVED</td><td>REOPENED</td></tr><tr><td>resolution</td><td>FIXED</td><td></td></tr><tr><th scope=row rowspan=1>Raymond Penners</th><td rowspan=1>Oct 1 2002 01:58:37 UTC</td><td>status</td><td>REOPENED</td><td>ASSIGNED</td></tr><tr><th scope=row rowspan=2>Raymond Penners</th><td rowspan=2>Oct 1 2002 11:23:23 UTC</td><td>status</td><td>ASSIGNED</td><td>RESOLVED</td></tr><tr><td>resolution</td><td></td><td>FIXED</td></tr><tr><th scope=row rowspan=1>Kees-Jan Dijkzeul</th><td rowspan=1>Oct 2 2002 06:20:31 UTC</td><td>status</td><td>RESOLVED</td><td>VERIFIED</td></tr></tbody></table></div></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Description</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Sep 4 2002 20:49:06 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>When I move the mouse over a break window, it does not move away

once I got it to move away by clicking on it, but I could not reproduce that 
behaviour (It jumped to the upper left corner. being used to wp, I didn&#39;t 
expect it to go there, but I guess it&#39;s acceptable :-) )</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 1</div><div class=float-left>Rob Caelers&nbsp;&nbsp;Sep 5 2002 18:05:57 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Works fine under Linux. This is probably a bug in GDK/GTK&#43; on win32.
enter_notify events don&#39;t work under win32...</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 2</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Sep 14 2002 23:17:16 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Fixed. 
I must admit, it jumps around not exactly the way I programmed it to do. :)

</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 3</div><div class=float-left>Rob Caelers&nbsp;&nbsp;Sep 14 2002 23:51:46 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>In the linux version, now ALL windows move. This includes the MP/RB windows with
insist and buttons. The buttons are very hard to use this way....

I tried adding &#34;set_avoid_pointer(false);&#34; to RestBreakWindow::start(). It
didn&#39;t help...</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 4</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Sep 23 2002 01:50:39 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>It still is possible to enter the prelude window, without it jumping away. 
Admittedly, it&#39;s much more difficult than before.

One other problem: The text cursor is ignored. The prelude window just sits 
there in the middle being very annoying.

wp solves this by jumping away after a few seconds, regardless of mouse 
actions. When the prelude window is near the border of the screen, it is far 
less annoying :-)</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 5</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Sep 24 2002 13:06:30 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>The prelude window does jump away automatically, did so since the beginning.
Reporter, please confirm this.

I can confirm that there is one way to enter the prelude window:
- x=middle, y=bottom =&gt; you can enter from the left.
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 6</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Sep 24 2002 23:14:21 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Technically, you are correct. The window does jump away. However, it takes much 
longer to do so than with wp. I propose to make it jump away sooner.

As for the x=middle, y=bottom stuf: It doesn&#39;t always work, and I don&#39;t think 
it&#39;s the only way, either.

Is it at all relevant from which side you enter?</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 7</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Sep 25 2002 10:42:40 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>gdk_window_get_pointer was unreliable, now using native W32 call.
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 8</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Sep 26 2002 23:30:06 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Now, it is indeed impossible to move the mouse over a prelude window. 
Nevertheless, I&#39;m still not entirely happy.

First of all, the prelude window stays too long in the middle of the screen 
before automatically jumping away. I think it should jump after one, maybe two 
seconds, but not much more.

When attempting to move the mouse over the prelude window, It jumps to a lot of 
places, all on the right hand side of the screen, following some kind of zig-
zag pattern. Two things can be said about that:
- there are a lot of places where the window is possibly displayed. 
- most of them are not at places where a user would see them (the border of the 
screen outside the area I&#39;m usually paying attention to).

I guess, what I&#39;m trying to say is, that if the prelude is near the border of 
the screen, I have to go look for it, because it is not &#34;in view&#34;. With the 
current algorithm there are a lot of places I need to look.

I guess I&#39;m going to advocate (once again :-) wp behaviour, where the prelude 
is either in the middle of the screen, or at the top of the screen. This way, 
the amount of searching on my part is minimized.
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 9</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Sep 27 2002 00:53:06 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Ok, I forgot to have the prelude window moved automatically. Will be fixed.
Also, I will check why it is zig-zagging, as it shouldn&#39;t.  You should be able
to &#34;push/shove&#34; the prelude whereever you want.

&gt; most of them are not at places where a user would see them (the border of the 
screen outside the area I&#39;m usually paying attention to).
&gt; I&#39;m going to advocate (once again :-) wp behaviour, where the prelude 
is either in the middle of the screen, or at the top of the screen. 

The current behaviour is desirable, it is actually a feature. It doesn&#39;t really
show because of the zig-zagging, though, but that will be adressed. 

You don&#39;t always want to be disturbed by the prelude. So, you want to be able
shove it whereever it doesn&#39;t bother you. The top and center are not desirable
places. For example, when browsing the net, the top is your address bar, and the
center is the page itself.

Shoving is the way to go. I think it is wwwaaaay overkill to make this
configurable. What will become configurable is the _initial_ location of the
break windows (micro-pause, rest break and prelude).






</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 10</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Oct 1 2002 01:19:04 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>The prelude jumps aways sooner now. This is a great improvement. However, 
I&#39;m still not entirely happy. (You didn&#39;t expect me to, did you?)

When I first evaluated the new behaviour, it felt like it was still zig-
zagging, only this time the entire screen was used, instead of just the right 
half. Then, I asked Raymond the algorithm behind it:

&gt; mouse coors = x,y
&gt; prelude window center = cx,cy.
&gt; je duwt het p-window langs de lijn (x,y),(cx,cy)
&gt; als p-window tegen border aanloopt.. flipt ie naar andere kant.

This behaviour is recognisable :-). However, whenever you push the window, it 
jumps away way too far. This way, it is very hard to put the window precisely 
where you want it.

There also are some more minor remarks:

1. I don&#39;t think pushing along the line (x,y),(cx,cy) is a good idea. For 
example, if I&#39;m moving my mouse on an exact horizontal line, but I&#39;m not 
hitting the prelude box precisely in the middle, then the prelude box will also 
have some vertical movement, with the ultimate result of &#34;falling of my mouse 
pointer&#34;. I think it would be better to move the window in the same direction 
and the same amount the mouse pointer is moving.

2. When moving fast enough, it is possible to move over the prelude window 
without it moving. This is somewhat annoying, because this is the way I 
currently work. When a prelude appears, I wave at it with the mouse, and then 
it should jump to the correct location. wr either doesn&#39;t move at all, or in 
some random direction, because of the uncoordinated wave and the pushing 
algorithm.

3. I&#39;m not sure flipping to the other side is a good idea. Especially with the 
current large jumps, this gives a behaviour that appears random. Reducing the 
jumps should help. Placing the window partially off-screen might also help. 
Clipping to the screen (no flipping at all) might also be an acceptable 
solution.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 11</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Oct 1 2002 01:58:37 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>I agree, I also didn&#39;t really like the new solution. In my 639th try to address
this bug, I&#39;ll do the following:

There will be nine places (&#34;O&#34;) where the prelude can be positioned:
O-O-O
|X|X|
O-O-O
|X|X|
O-O-O
You can push the prelude from one O to the other O. The algorith is to determine
where to jump to will be the same as currently present.

So, in practice, this boils down to the current solution, but with the positions
restricted to a 3x3 grid.

Btw, you are talking about large jumps. IMHO, they should be large. If the mouse
pointer is there, that means that you are trying to work in that area. The
prelude should _not_ interfere, and move the h*ll out...



</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 12</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Oct 1 2002 02:06:44 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>You&#39;re mixing two different concepts.

1. &#34;I&#39;ll go wherever you push me&#34; -- In this concept, the user has to have fine-
grained control over the pushing, otherwise you get apparent random behaviour.

2. &#34;I&#39;ll get out of the way&#34; -- In this concept, the window jumps to the &#34;right 
place&#34;. The user cannot be expected to indicate which place is the right one. 
Large jumps are allowed, if they lead to &#34;the right place&#34;.

The most obvious &#34;out of the way&#34; location is an invisible prelude. If you want 
to go this way, I propose to make the prelude invisible if it has to jump away 
more than two times. If you like, you can turn the sheep in the system tray red 
to indicate that there is an invisible prelude. This approach is especially 
desirable if the prelude is going to disappear anyway. If a break is going to 
be forced, you probably don&#39;t want this.</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 13</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Oct 1 2002 04:18:17 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>The &#34;I&#39;ll go wherever you push me&#34; is pointless if you have a good
implementation of &#34;I&#39;ll get out of the way&#34;. Why? Because you&#39;ll only want to
place it on a specific place if the current place interferes with your working
activities. 

&gt; The most obvious &#34;out of the way&#34; location is an invisible prelude.

I don&#39;t agree, the prelude should somehow be irritating enough not to be
ignored, but it should be not irritating enough to obstruct your working activities.

IMHO, my proposed grid approach does just that.
</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 14</div><div class=float-left>Raymond Penners&nbsp;&nbsp;Oct 1 2002 11:23:23 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Kees-Jan, you were right all along, almost:

&gt; I guess I&#39;m going to advocate (once again :-) wp behaviour, where the prelude 
&gt; is either in the middle of the screen, or at the top of the screen. This way, 
&gt; the amount of searching on my part is minimized.

There are now only three places where the window can be:
- Initially it appears in the middle.
- If  you continue working, it auto-jumps to the top of your screen. 
- If your pointer enters the window, it jumps to either the bottom/top.

That&#39;s it.. no grid, no more sin()/cos() to determine how to push the window in
a direction.


</pre></div></div></div></div><div class="row pt-2"><div class=col-12><div class=card><div class="card-header h4 p-2"><div class=float-right>Comment 15</div><div class=float-left>Kees-Jan Dijkzeul&nbsp;&nbsp;Oct 2 2002 06:20:31 UTC</div></div><div class="card-body p-2"><pre style=white-space:pre-wrap>Finally!</pre></div></div></div></div><div class="row pb-5"></div></div></div><footer class="container bg-light page-footer"><div class="row my-2"><div class="col-12 col-md text-muted"><img src=/images/workrave-logo.svg alt=Workrave style=width:auto;height:20px>
<small class=d-block>&copy; 2001-2020 Raymond Penners & Rob Caelers</small></div><div class="col-12 col-md text-muted"><small>Unless otherwise stated, all text and images on this website are licensed
under the General Public License version 3 or later.<br>This website is powered by <a href=https://gohugo.io>Hugo</a></small></div></div></footer><script src=https://code.jquery.com/jquery-3.4.1.min.js integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js integrity=sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js integrity=sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6 crossorigin=anonymous></script>
<script type=text/javascript src=https://workrave.org/js/main.min.428d5e8643be5482cc6cf2fb1c80b2e5625f8df018f53d6474a9f4d58668e74c58b35e455ed592b933e43659cc50dc11f452e947f61df3fd7b137161a785b411.js integrity="sha512-Qo1ehkO+VILMbPL7HICy5WJfjfAY9T1kdKn01YZo50xYs15FXtWSuTPkNlnMUNwR9FLpR/Yd8/17E3Fhp4W0EQ=="></script></body></html>